{{ forms.begin('wishlist','','post', {class:''}) }}
	<fieldset>
		<div class="form-group fgq">
			<label for="name">Wish List Name</label>
			{{ forms.text('wishlist[name]',wishlist.name, {class:'form-control parsley-validated', id:'name', placeholder:"Wish List Name", required: true}) }}
			<div class="validation">{{ forms.errorlist(form_errors, 'name') }}</div>
		</div>
		<div class="form-group fgq">
			<label for="privacy">Privacy</label>
			{{ forms.select('wishlist[privacy]', wishlist.privacy, {'private':'Private', 'unlisted':'Unlisted', 'public':'Public'}, {required: true, class:'form-control parsley-validated',id:'privacy'}) }}
			<div class="validation">{{ forms.errorlist(form_errors, 'privacy') }}</div>
		</div>
		{% set address_select = {} %}
		{% for address in addresses %}
		  {% set address_select = address_select + {(address.id):address.one_line} %}
		{% endfor %}
		<div class="form-group fgq">
			<label for="address">Mailing Address</label>
			{% if address_select is empty %}
			<br><a class="btn btn-sm btn-default" href="{{app.url}}/account/addresses/new">Please create an address first</a>
			{% else %}
			{{ forms.select('wishlist[address_id]', wishlist.address_id, address_select, {label:'Address', class:'form-control parsley-validated', id:'address', required: true}) }}
			{% endif %}
			<div class="validation">{{ forms.errorlist(form_errors, 'address_id') }}</div>
		</div>
		<div class="form-group custom-control custom-checkbox">
			{{ forms.checkbox('wishlist[make_default]', 1, {}) }}
			<label class="custom-control-label" for="wishlist[make_default]">Default Wish List</label>
			<div class="validation">{{ forms.errorlist(form_errors, 'make_default') }}</div>
		</div>
	</fieldset>
	<div class="form-actions actions">
		{% if action == 'create' %}
		{{ forms.submit('wishlist[action]', 'create', 'Create', {class:'btn btn-lg btn-primary btn-block'})}}
		<a class="btn btn-lg btn-default btn-block" href="{{ app.url }}/account/wishlists">Cancel</a>
		{% else %}
		{{ forms.submit('wishlist[action]', 'save', 'Save', {class:'btn btn-lg btn-primary btn-block'})}}
		<a class="btn btn-lg btn-default btn-block" href="{{ app.url }}/wishlist/{{ wishlist.id }}">Cancel</a>
		<button class="btn btn-lg btn-default btn-block" data-toggle="modal" data-target="#delete-modal" type="button">Delete this Wish List</button>
		{% endif %}
	</div>
	{{ forms.end() }}
	<div class="modal fade" id="delete-modal" tabindex="-1" role="dialog" aria-labelledby="delete-modal-label" aria-hidden="true">
	  <div class="modal-dialog modal-sm">
		<div class="modal-content">
		  <div class="modal-header">
			<div class="h3 modal-title" id="delete-modal-label">Delete "{{wishlist.name}}"?</div>
			<button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
		  </div>
		  <div class="modal-body">
			  Are you sure you want to delete "{{ wishlist.name }}"?
		  </div>
		  {{ forms.begin('wishlist') }}
		  {% spaceless %}<div class="modal-footer">
		      <div class="flex-fill">
			<button type="button" class="btn btn-default btn-block" data-dismiss="modal" type="button">Cancel</button>
			<button type="submit" class="btn btn-danger btn-block" name="wishlist[action]" value="delete">Delete</button>
			</div>
		  </div>{% endspaceless %}
		  {{ forms.end() }}
		</div>
	  </div>
	</div>
