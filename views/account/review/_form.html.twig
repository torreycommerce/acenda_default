{{forms.begin('review','','post',{ 'class':'form-region' }) }}
{# Begin identity #}
<fieldset>
	<legend>Identity</legend>
	<div class="form-group">
		<label class="control-label" for="input1">First Name <span class="text-danger">*</span></label>
		{{ forms.text('review[first_name]',review.first_name, {class:'form-control parsley-validated', placeholder:"First Name", required:true}) }}
		<div class="validation">{{ forms.errorlist(form_errors, 'first_name') }}</div>
	</div>
	<div class="form-group">
		<label class="control-label" for="input1">Email <span class="text-danger">*</span></label>
		{{ forms.text('review[email]',review.email, {class:'form-control parsley-validated', placeholder:"Email", required:true}) }}
		<div class="validation">{{ forms.errorlist(form_errors, 'email') }}</div>
	</div>
	<div class="form-group">
		<label class="control-label" for="input1">City <span class="text-danger">*</span></label>
		{{ forms.text('review[city]',review.city, {class:'form-control parsley-validated', placeholder:"City", required:true}) }}
		<div class="validation">{{ forms.errorlist(form_errors, 'city') }}</div>
	</div>
	<div class="form-group">
		<label class="control-label" for="input1">State/Province <span class="text-danger">*</span></label>
		{{ forms.text('review[state]',review.state, {class:'form-control parsley-validated', placeholder:"State/Province", required:true}) }}
		<div class="validation">{{ forms.errorlist(form_errors, 'state') }}</div>
	</div>
</fieldset>
{# End identity #}
{# Begin review #}
<fieldset>
	<legend>Review Text</legend>
	<div class="form-group">
		<label class="control-label" for="input1">Title <span class="text-danger">*</span></label>
		{{ forms.text('review[title]',review.title, {class:'form-control parsley-validated', placeholder:"Title", required:true}) }}
		<div class="validation">{{ forms.errorlist(form_errors, 'title') }}</div>
	</div>
	
	<div class="form-group">
		<label class="control-label" for="input1">Comment <span class="text-danger">*</span></label>
		{{ forms.textarea('review[comment]',review.comment, {class:'form-control parsley-validated', placeholder:"Comment", required:true}) }}
		<div class="validation">{{ forms.errorlist(form_errors, 'comment') }}</div>
	</div>
</fieldset>
{# End review #}
{# Begin ratings #}
<fieldset>
	<legend>Ratings</legend>
	<div class="form-group text-center">
		{{ forms.rating('score', review.score,'glyphicon-star') }}
	</div>
</fieldset>
{# End ratings #}
{# Begin actions #}
<div class="actions text-center">
	{% if create %}
	{{ forms.submit('review[action]', 'create', 'Create', {class:'btn btn-lg btn-primary'})}}
	{% else %}
	{{ forms.submit('review[action]', 'save', 'Save', {class:'btn btn-lg btn-primary'})}}
	<a class="btn btn-lg btn-secondary" data-toggle="modal" data-target="#delete-modal">Delete this Review</a>
	{% endif %}
</div>
{# End actions #}
{{ form.end() }}
<div class="modal fade" id="delete-modal" tabindex="-1" role="dialog" aria-labelledby="delete-modal-label" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
				<h4 class="modal-title" id="delete-modal-label"><i class="fa fa-trash"></i> Delete "{{review.title}}"?</h4>
			</div>
			<div class="modal-body">
			  Are you sure you want to delete "{{ review.title }}"?
			</div>
			<div class="modal-footer">
				<a class="btn btn-default" data-dismiss="modal">Cancel</a> 
				<a class="btn btn-danger" href="{{ app.request.base}}/{{app.request.url|replace({'edit': 'delete'}) }}">Delete</a> 
			</div>
		</div>
	</div>
</div>